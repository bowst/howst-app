# Howst

Tool to quickly and easily spin up local Drupal instances.  It functions essentially as a wrapper around a Vagrantfile with some convienience management methods.

## Installation

Install the following dependencies.

* Vagrant (https://www.vagrantup.com/)
* Vagrant plugins:
   * vagrant-berkshelf
   * vagrant-omnibus
   * Vagrant plugins are easily from the command line: `vagrant plugin install vagrant-berkshelf vagrant-omnibus`
* Chef Development Kit (https://downloads.chef.io/chef-dk/)
* NodeJS (http://nodejs.org/)

Then install from the npm command line.

    $ npm install -g howst
    
##Developer Install

    $ git clone https://github.com/bowst/howst-app.git
    $ cd howst-app
    $ npm link

This will link the package to your bin so you can edit code in your local git repo and test on the commandline from anywhere! Just keep in mind that if you make changes to the `vagrant` folder, you'll need to run `npm link` again to copy the appropriate files to the $HOME/.howst directory.

## Getting Started

1. (Existing Sites Only) Clone the code onto your local machine and create a folder in $HOME/.drush that contains the drush alias for the remote site and any other drush files you like (policy files, etc.)
2. Create a new Howst machine with `howst create <hostname>`.  Be sure to give it a meaningful and unique hostname.
3. The wizard will walk you though the remainder of the setup.  The available options, defaults, and descriptions are listed below:
   * Is Existing Site [false] - Whether site is already created and hosted somewhere (pantheon, acquia, aws, etc) or if it's a brand spanking new install
   * (Existing Sites Only) Is this a Pantheon Site [false] - Tells Howst to configure an environment specific to Pantheon
   * (New Site Only) Drupal Version [7] - Which version of Drupal to install
   * Host Docroot [undefined] - Path to Drupal Docroot on your local machine
   * Drush Version [6] - Which version of Drush to use.  (Note that Drush 7 is required for Drupal 8)
   * Path to Drush Files [$HOME/.drush/<hostname>] - Path to the drush files on your local machine
   * (Existing Sites Only) Drush Alias [<hostname>] - Drush alias of the existing site your are recreating (don't include the preceeding `@`)
   * Port [8080] - Which port on you local machine will used to access the drupal instance
4. (New Sites Only) - You are done!  Visit `http://localhost:<port>` to access the Drupal Install script
5. (Existing Sites Only) - Most of the way there!  Just need to pull the db.  SSH into your new Howst machine by using: `howst ssh <hostname>`.
6. Run the script generated by Howst to install the db. This can be run from anywhere by using the `pull-db` command.
7. Make sure your project has a settings.php file.  Some hosting providers do not include settings.php in the git repo.


##Usage

```
Usage: howst [options] [command]


  Commands:

    create <hostname>           Create a new Howst machine
    config <hostname>           Reconfigure an existing Howst machine
    remove <hostname>           stops and deletes all traces of the Howst machine
    list [options]              Lists all known Howst machines
    remote-password <password>  Sets password for syncing remote databases
    *                           Vagrant passthrough.  See below.

  Options:

    -h, --help     output usage information
    -V, --version  output the version number

  Vagrant passthrough commands: 
        box             manages boxes: installation, removal, etc. 
        connect         connect to a remotely shared Vagrant environment 
        default         sets the defaults howst instance 
        global-status   outputs status Vagrant environments for this user 
        halt            stops the vagrant machine 
        help            shows the help for a subcommand 
        init            initializes a new Vagrant environment by creating a Vagrantfile 
        login           log in to HashiCorp's Atlas 
        package         packages a running vagrant environment into a box 
        plugin          manages plugins: install, uninstall, update, etc. 
        provision       provisions the vagrant machine 
        push            deploys code in this environment to a configured destination 
        rdp             connects to machine via RDP 
        reload          restarts vagrant machine, loads new Vagrantfile configuration 
        resume          resume a suspended vagrant machine 
        share           share your Vagrant environment with anyone in the world 
        ssh             connects to machine via SSH 
        ssh-config      outputs OpenSSH valid configuration to connect to the machine 
        status          outputs status of the vagrant machine 
        suspend         suspends the machine 
        up              starts and provisions the vagrant environment
        version         prints current and latest Vagrant version

```

## Contributing

1. Fork it ( https://github.com/bowst/howst-app/fork )
2. Create your feature branch (`git checkout -b my-new-feature`)
3. Commit your changes (`git commit -am 'Add some feature'`)
4. Push to the branch (`git push origin my-new-feature`)
5. Create a new Pull Request
